<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    

    <script>
        // 콜백함수(CALL BACK) : 함수의 로직을 전달받는 함수
        // 함수를 호출하는 시점(콜백함수가 호출/실행을 대신함)이 바뀌어진 형태의 함수
        // 기존방식 : 사용자(개발자)가 함수를 직접 정의-> 정의된 함수를 호출(CALL)하여 결과를 반환받는 방식
        // CALLBACK : 콜백함수에 인자로 로직이 담긴 함수를(함수주소)를 전달하여 콜백함수로부터 처리된 결과를
        // 반환받는 방식
        // 외부로부터 로직을 받아서 내부에서 특정 시점에 실행을 시킴



        // 일반함수
        // function func(n1,n2){
        //     console.log("func(n1,n2)...call!");
        //     return n1 + n2;
        // }
        // const v1 = func(10,20); //call-by-value //값(value) 전달을 통한 함수 직접 실행(call)
        // console.log("v1",v1);


        // //콜백 함수
        // function callBackFunc(n1,n2,logic){
        //                             //func()의 위치정보를 logic을 받음
        //     console.log('callBackFunc....start...');
        //     const v= logic(n1,n2);  //call위치
        //     console.log("v",v);
        //     console.log('callBackFunc...start...');
        // }

        // callBackFunc(100,200,func);
        //                     //만들어진 함수의 이름 호출
        // console.log("------------------------")
        // callBackFunc(100,200,(a,b)=>{return a*b;});
        //                      //이름없는 함수
        //                      // 그래도 함수를 저장할 임시 공간이 생성됨(r: 데이터 기반 언어 == 선 저장 후 처리)
        // console.log("------------------------")


        //Callback함수로 Map 만들기
        const arr = [
            {"id":"111","name":"티모",age:555,"addr" : "대구"},
            {"id":"222","name":"렝가",age:333,"addr" : "인천"},
            {"id":"333","name":"워윅",age:222,"addr" : "부산"},
            {"id":"444","name":"문도박사",age:111,"addr" : "울산"},
            {"id":"555","name":"이즈리얼",age:99,"addr" : "창원"}
        ]
        function custoMap(array,func)
                         // func에 맞는 array를 재구성해야함
        {
            //array == arr
            //func = (item)=>{return{"id":item.id, "name":item.name}}
            let newArray = []
            for(let i=0;i<array.length;i++)
            {
                const item = array[i]; //배열의 i번째 위치 아이템을 꺼내옴
                                       // 0 index {}, 1 index {}, 2 index{}...
                const newItem = func(item); //id와 이름의 obj를 반환
                newArray.push(newItem);     //끝에다 차곡차곡 저장
                
            }
            return newArray;
        }
        // customMap(저장된배열, 처리할로직)
        const arr02 = customMap(arr,(item)=>{return {"id":item.id, "name":item.name}})
                                    //func 함수 정의
        console.log(arr02);
        


        //Closure + Callback
        function custoMap2(array)
        {
            let newArray = []   //state

            //inner Function
            function map(func){
            for(let i=0;i<array.length;i++)
            {
                const item = array[i]; //배열의 i번째 위치 아이템을 꺼내옴
                                       // 0 index {}, 1 index {}, 2 index{}...
                const newItem = func(item); //id와 이름의 obj를 반환
                newArray.push(newItem);     //끝에다 차곡차곡 저장
                
            }
            return newArray;

            }

            return {"map":map};     //외부에서 접근할 때 함수명으로 할 수 O

        }
        const arr03 =
        customMap2(arr).map( (item)=>{return {"id":item.id,"age":item.age} })

        console.log(arr03);
        // console.log(customMap2(arr))





    </script>
</body>
</html>